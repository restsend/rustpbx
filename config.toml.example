# A example config file
# mv config.toml.example config.toml
# cargo run . --bin rustpbx --conf config.toml

http_addr = "0.0.0.0:8080"
log_level = "debug"
#log_file = "/tmp/rustpbx.log"
stun_server = "stun.l.google.com:19302"
recorder_path = "/tmp/recorders"
media_cache_path = "/tmp/mediacache"

[ua]
addr="0.0.0.0"
udp_port=13050 # don't use 5060


[proxy]
modules = ["acl", "auth", "registrar", "call"]
addr = "0.0.0.0"
udp_port = 15060
registrar_expires = 60
ws_handler= "/ws"
# media_proxy = "auto"

# ACL rules
acl_rules = [
    "allow 10.0.0.0/8",
    "deny 0.123.4.0/16",
    "allow all",
    "deny all"
]

[ua.handler]
type = "webhook"
url = "http://localhost:8090/webhook"
method = "POST"


[proxy.user_backend]
type = "memory"
users = [
    { username = "bob", password = "123456" },
    { username = "alice", password = "123456" },
]

[callrecord]
type = "local"
root = "/tmp/cdr"

[proxy.trunks.wuhoo]
dest = "sip:123.456.789.00:1234"

[[proxy.routes]]
name = "default"
priority = 1
dest = "wuhoo"

[proxy.routes.match]
"to.user" = "^\\+.*"

[proxy.routes.rewrite]
"to.user" = "+{1}"
"to.host" = "123.456.789.00:1234"
"from.user" = "12345"
"from.host" = "123.456.789.00:1234"
